<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hasil Klasifikasi Mangga</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            animation: {
              "fade-in": "fadeIn 0.8s ease-in-out",
              "slide-up": "slideUp 0.6s ease-out",
              "slide-left": "slideLeft 0.6s ease-out",
              "slide-right": "slideRight 0.6s ease-out",
              "pulse-slow": "pulse 3s ease-in-out infinite",
              "bounce-gentle": "bounce 2s infinite",
            },
            keyframes: {
              fadeIn: {
                "0%": { opacity: "0" },
                "100%": { opacity: "1" },
              },
              slideUp: {
                "0%": { transform: "translateY(20px)", opacity: "0" },
                "100%": { transform: "translateY(0)", opacity: "1" },
              },
              slideLeft: {
                "0%": { transform: "translateX(-30px)", opacity: "0" },
                "100%": { transform: "translateX(0)", opacity: "1" },
              },
              slideRight: {
                "0%": { transform: "translateX(30px)", opacity: "0" },
                "100%": { transform: "translateX(0)", opacity: "1" },
              },
            },
          },
        },
      };
    </script>
  </head>
  <body
    class="min-h-screen bg-gradient-to-br from-orange-50 via-yellow-50 to-green-50"
  >
    <div class="container mx-auto px-4 py-8">
      <!-- Header -->
      <div class="text-center mb-12 animate-fade-in">
        <div class="relative inline-block mb-8">
          <!-- Decorative background circles -->
          <div class="absolute inset-0 -m-4">
            <div
              class="w-24 h-24 bg-gradient-to-r from-green-200 to-emerald-200 rounded-full opacity-30 animate-pulse-slow"
            ></div>
          </div>
          <div class="absolute inset-0 -m-2">
            <div
              class="w-20 h-20 bg-gradient-to-r from-green-300 to-emerald-300 rounded-full opacity-40 animate-pulse-slow"
              style="animation-delay: 1s"
            ></div>
          </div>

          <!-- Main icon -->
          <div
            class="relative inline-block p-5 bg-gradient-to-r from-green-400 via-emerald-400 to-teal-400 rounded-full shadow-2xl transform hover:scale-110 transition-transform duration-300"
          >
            <svg
              class="w-14 h-14 text-white"
              fill="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"
              />
            </svg>
          </div>
        </div>

        <div class="space-y-4">
          <div
            class="inline-block px-6 py-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full border border-green-200 mb-4"
          >
            <span
              class="text-green-700 font-semibold text-sm tracking-wide uppercase"
              >âœ¨ Analisis Selesai</span
            >
          </div>

          <h1 class="text-5xl md:text-7xl font-extrabold leading-tight">
            <span
              class="bg-gradient-to-r from-green-600 via-emerald-600 to-teal-600 bg-clip-text text-transparent drop-shadow-sm"
            >
              Hasil Klasifikasi
            </span>
          </h1>

          <div class="max-w-2xl mx-auto">
            <p class="text-gray-600 text-xl leading-relaxed">
              ðŸ¤– <strong>Artificial Intelligence</strong> telah menganalisis
              gambar Anda dengan teknologi
              <span class="text-green-600 font-semibold">deep learning</span>
              terdepan
            </p>
          </div>

          <!-- Decorative line -->
          <div class="flex items-center justify-center mt-8">
            <div
              class="h-1 w-20 bg-gradient-to-r from-transparent via-green-400 to-transparent rounded-full"
            ></div>
            <div
              class="mx-4 p-2 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full"
            >
              <div
                class="w-2 h-2 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full"
              ></div>
            </div>
            <div
              class="h-1 w-20 bg-gradient-to-r from-transparent via-emerald-400 to-transparent rounded-full"
            ></div>
          </div>
        </div>
      </div>

      <!-- Main Results Layout -->
      <div class="max-w-7xl mx-auto">
        <div
          class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border border-white/20 overflow-hidden"
        >
          <!-- Desktop: Side by side, Mobile: Stacked -->
          <div class="flex flex-col lg:flex-row">
            <!-- Image Section - Left on Desktop -->
            <div
              class="lg:w-2/5 p-8 border-b lg:border-b-0 lg:border-r border-gray-100 animate-slide-left"
            >
              <div class="sticky top-8">
                <div class="text-center mb-6">
                  <h2 class="text-2xl font-bold text-gray-800 mb-2">
                    Gambar yang Dianalisis
                  </h2>
                  <p class="text-gray-600">Preview hasil upload</p>
                </div>

                <div class="relative group">
                  <div
                    class="absolute inset-0 bg-gradient-to-r from-orange-400 to-yellow-400 rounded-2xl blur opacity-25 group-hover:opacity-40 transition-opacity duration-300"
                  ></div>
                  <div
                    class="relative bg-gradient-to-r from-orange-100 to-yellow-100 rounded-2xl p-4 transform transition-transform duration-300 group-hover:scale-105"
                  >
                    <img
                      src="{{ img_path }}"
                      alt="Gambar Mangga"
                      class="w-full h-auto max-h-96 rounded-xl shadow-lg object-cover"
                    />
                  </div>
                </div>

                <!-- Image Info -->
                <div class="mt-6 grid grid-cols-2 gap-4">
                  <div class="bg-white/60 rounded-xl p-3 text-center">
                    <svg
                      class="w-6 h-6 mx-auto mb-2 text-blue-500"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M9,10V12H7V10H9M13,10V12H11V10H13M17,10V12H15V10H17M19,3A2,2 0 0,1 21,5V19A2,2 0 0,1 19,21H5C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H19M19,19V5H5V19H19Z"
                      />
                    </svg>
                    <div class="text-sm font-semibold text-gray-700">
                      Format
                    </div>
                    <div class="text-xs text-gray-500">JPG/PNG</div>
                  </div>
                  <div class="bg-white/60 rounded-xl p-3 text-center">
                    <svg
                      class="w-6 h-6 mx-auto mb-2 text-green-500"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"
                      />
                    </svg>
                    <div class="text-sm font-semibold text-gray-700">
                      Status
                    </div>
                    <div class="text-xs text-gray-500">Teranalisis</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Results Section - Right on Desktop -->
            <div class="lg:w-3/5 p-8 space-y-8 animate-slide-right">
              <!-- Model 1 Results -->
              <div
                class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-100 transform transition-all duration-300 hover:scale-105 hover:shadow-lg"
              >
                <div class="flex items-center mb-6">
                  <div
                    class="w-14 h-14 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-full flex items-center justify-center mr-4 shadow-lg"
                  >
                    <svg
                      class="w-7 h-7 text-white"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M11,16.5L6.5,12L7.91,10.59L11,13.67L16.59,8.09L18,9.5L11,16.5Z"
                      />
                    </svg>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold text-gray-800">
                      Deteksi Mangga
                    </h2>
                    <p class="text-gray-600">
                      Model 1: Klasifikasi Mangga/Bukan Mangga
                    </p>
                  </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                  <div
                    class="bg-white/80 rounded-xl p-6 text-center shadow-sm hover:shadow-md transition-shadow"
                  >
                    <div
                      class="text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent mb-2"
                    >
                      {{ label1 }}
                    </div>
                    <div class="text-sm text-gray-600 font-medium">
                      Klasifikasi
                    </div>
                  </div>
                  <div
                    class="bg-white/80 rounded-xl p-6 text-center shadow-sm hover:shadow-md transition-shadow"
                  >
                    <div
                      class="text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent mb-2"
                    >
                      {{ (confidence1 * 100) | round(2) }}%
                    </div>
                    <div class="text-sm text-gray-600 font-medium">
                      Kepercayaan
                    </div>
                  </div>
                </div>

                <!-- Enhanced Confidence Bar -->
                <div class="space-y-2">
                  <div
                    class="flex justify-between text-sm text-gray-700 font-medium"
                  >
                    <span>Tingkat Kepercayaan</span>
                    <span class="text-blue-600"
                      >{{ (confidence1 * 100) | round(2) }}%</span
                    >
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-4 shadow-inner">
                    <div
                      class="bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 h-4 rounded-full transition-all duration-1000 ease-out shadow-sm confidence-bar-1"
                      style="width: {{ confidence1 * 100 }}%"
                    ></div>
                  </div>
                </div>
              </div>

              <!-- Model 2 Results (if exists) -->
              {% if top3 %}
              <div
                class="bg-gradient-to-r from-orange-50 to-yellow-50 rounded-2xl p-6 border border-orange-100"
              >
                <div class="flex items-center mb-6">
                  <div
                    class="w-14 h-14 bg-gradient-to-r from-orange-500 to-yellow-500 rounded-full flex items-center justify-center mr-4 shadow-lg"
                  >
                    <svg
                      class="w-7 h-7 text-white"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M12,2L13.09,8.26L20,9L13.09,9.74L12,16L10.91,9.74L4,9L10.91,8.26L12,2Z"
                      />
                    </svg>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold text-gray-800">
                      3 Varietas Mangga Teratas
                    </h2>
                    <p class="text-gray-600">
                      Model 2: Klasifikasi Varietas Mangga
                    </p>
                  </div>
                </div>

                <div class="space-y-4">
                  {% for label, confidence in top3 %}
                  <div
                    class="bg-white/90 rounded-xl p-4 shadow-sm hover:shadow-md transition-shadow"
                  >
                    <div class="flex justify-between items-center">
                      <div class="font-semibold text-lg text-gray-700">
                        {{ label }}
                      </div>
                      <div class="text-sm text-orange-600 font-medium">
                        {{ (confidence * 100) | round(2) }}%
                      </div>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-3 mt-2">
                      <div
                        class="h-3 rounded-full bg-gradient-to-r from-orange-400 to-yellow-400 transition-all duration-700 ease-out"
                        style="width: {{ confidence * 100 }}%"
                      ></div>
                    </div>
                  </div>
                  {% endfor %}
                </div>
              </div>
              {% endif %}

              <!-- Enhanced Summary Card -->
              <div
                class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-2xl p-6 border border-green-100 transform transition-all duration-300 hover:scale-105 hover:shadow-lg"
              >
                <div class="flex items-center mb-6">
                  <div
                    class="w-14 h-14 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center mr-4 shadow-lg"
                  >
                    <svg
                      class="w-7 h-7 text-white"
                      fill="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                      />
                    </svg>
                  </div>
                  <div>
                    <h2 class="text-2xl font-bold text-gray-800">
                      Ringkasan Hasil
                    </h2>
                    <p class="text-gray-600">Kesimpulan dari analisis AI</p>
                  </div>
                </div>

                <div class="bg-white/80 rounded-xl p-6 shadow-sm">
                  <p class="text-gray-700 leading-relaxed text-lg">
                    {% if label1.lower() == 'mangga' or 'mango' in
                    label1.lower() %}
                    <span
                      class="inline-flex items-center text-green-600 font-semibold mb-2"
                    >
                      <svg
                        class="w-5 h-5 mr-2"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"
                        />
                      </svg>
                      Gambar berhasil teridentifikasi sebagai mangga </span
                    ><br />
                    dengan tingkat kepercayaan
                    <strong class="text-blue-600"
                      >{{ (confidence1 * 100) | round(2) }}%</strong
                    >. {% if label2 %} <br /><br />Jenis mangga yang terdeteksi
                    adalah
                    <strong class="text-orange-600">{{ label2 }}</strong> dengan
                    tingkat kepercayaan
                    <strong class="text-green-600"
                      >{{ (confidence2 * 100) | round(2) }}%</strong
                    >. {% endif %} {% else %}
                    <span
                      class="inline-flex items-center text-red-600 font-semibold mb-2"
                    >
                      <svg
                        class="w-5 h-5 mr-2"
                        fill="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          d="M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"
                        />
                      </svg>
                      Gambar tidak teridentifikasi sebagai mangga </span
                    ><br />
                    Sistem mendeteksi bahwa ini adalah
                    <strong class="text-orange-600">{{ label1 }}</strong> dengan
                    tingkat kepercayaan
                    <strong class="text-blue-600"
                      >{{ (confidence1 * 100) | round(2) }}%</strong
                    >. {% endif %}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="max-w-7xl mx-auto mt-8">
        <div class="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href="/"
            class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-blue-500 to-indigo-500 text-white font-bold rounded-2xl hover:from-blue-600 hover:to-indigo-600 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
          >
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12,4V2A10,10 0 0,0 2,12H4A8,8 0 0,1 12,4Z" />
            </svg>
            Analisis Gambar Lain
          </a>

          <button
            onclick="shareResult()"
            class="inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-green-500 to-emerald-500 text-white font-bold rounded-2xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-xl"
          >
            <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
              <path
                d="M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"
              />
            </svg>
            Bagikan Hasil
          </button>
        </div>
      </div>

      <!-- Tips Section -->
      <div class="max-w-7xl mx-auto mt-12">
        <div class="grid md:grid-cols-3 gap-6">
          <div
            class="bg-white/70 backdrop-blur-sm rounded-2xl p-6 text-center border border-white/30 hover:bg-white/90 transition-all duration-300 transform hover:scale-105 hover:shadow-lg"
          >
            <div
              class="w-14 h-14 mx-auto mb-4 p-3 bg-gradient-to-r from-blue-100 to-indigo-100 rounded-full text-blue-600 shadow-md"
            >
              <svg fill="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
                <path
                  d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-3 text-lg">Tips Foto</h3>
            <p class="text-gray-600">
              Gunakan pencahayaan yang baik dan fokus pada objek mangga untuk
              hasil terbaik
            </p>
          </div>

          <div
            class="bg-white/70 backdrop-blur-sm rounded-2xl p-6 text-center border border-white/30 hover:bg-white/90 transition-all duration-300 transform hover:scale-105 hover:shadow-lg"
          >
            <div
              class="w-14 h-14 mx-auto mb-4 p-3 bg-gradient-to-r from-orange-100 to-yellow-100 rounded-full text-orange-600 shadow-md"
            >
              <svg fill="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
                <path
                  d="M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-3 text-lg">Akurasi</h3>
            <p class="text-gray-600">
              Tingkat kepercayaan di atas 80% menunjukkan hasil yang sangat
              akurat
            </p>
          </div>

          <div
            class="bg-white/70 backdrop-blur-sm rounded-2xl p-6 text-center border border-white/30 hover:bg-white/90 transition-all duration-300 transform hover:scale-105 hover:shadow-lg"
          >
            <div
              class="w-14 h-14 mx-auto mb-4 p-3 bg-gradient-to-r from-green-100 to-emerald-100 rounded-full text-green-600 shadow-md"
            >
              <svg fill="currentColor" viewBox="0 0 24 24" class="w-8 h-8">
                <path
                  d="M16,9H21.5L16,3.5V9M7,2H17L23,8V18A2,2 0 0,1 21,20H7C5.89,20 5,19.1 5,18V4A2,2 0 0,1 7,2M3,6V22H21V24H3A2,2 0 0,1 1,22V6H3Z"
                />
              </svg>
            </div>
            <h3 class="font-bold text-gray-800 mb-3 text-lg">Simpan Hasil</h3>
            <p class="text-gray-600">
              Screenshot halaman ini untuk menyimpan hasil klasifikasi Anda
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Enhanced entrance animations
      document.addEventListener("DOMContentLoaded", function () {
        // Animate confidence bars with staggered timing
        setTimeout(() => {
          const confidenceBar1 = document.querySelector(".confidence-bar-1");
          const confidenceBar2 = document.querySelector(".confidence-bar-2");

          if (confidenceBar1) {
            const width1 = confidenceBar1.style.width;
            confidenceBar1.style.width = "0%";
            setTimeout(() => {
              confidenceBar1.style.width = width1;
            }, 300);
          }

          if (confidenceBar2) {
            const width2 = confidenceBar2.style.width;
            confidenceBar2.style.width = "0%";
            setTimeout(() => {
              confidenceBar2.style.width = width2;
            }, 600);
          }
        }, 800);

        // Add scroll-triggered animations for better UX
        const observerOptions = {
          threshold: 0.1,
          rootMargin: "0px 0px -50px 0px",
        };

        const observer = new IntersectionObserver((entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              entry.target.style.transform = "translateY(0)";
              entry.target.style.opacity = "1";
            }
          });
        }, observerOptions);

        // Observe tip cards for scroll animations
        document.querySelectorAll(".grid > div").forEach((card) => {
          card.style.transform = "translateY(20px)";
          card.style.opacity = "0.7";
          card.style.transition = "all 0.6s ease-out";
          observer.observe(card);
        });
      });

      function shareResult() {
        if (navigator.share) {
          navigator
            .share({
              title: "Hasil Klasifikasi Mangga",
              text: "Lihat hasil klasifikasi mangga saya menggunakan AI!",
              url: window.location.href,
            })
            .catch(console.error);
        } else {
          // Enhanced fallback with better UX
          navigator.clipboard
            .writeText(window.location.href)
            .then(() => {
              showNotification(
                "Link berhasil disalin ke clipboard!",
                "success"
              );
            })
            .catch(() => {
              showNotification(
                "Tidak dapat menyalin link. Silakan salin URL dari address bar.",
                "error"
              );
            });
        }
      }

      function showNotification(message, type = "success") {
        const notification = document.createElement("div");
        const bgColor = type === "success" ? "bg-green-500" : "bg-red-500";
        const icon =
          type === "success"
            ? '<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M9,20.42L2.79,14.21L5.62,11.38L9,14.77L18.88,4.88L21.71,7.71L9,20.42Z"/></svg>'
            : '<svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"/></svg>';

        notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-4 rounded-xl shadow-2xl z-50 flex items-center animate-slide-up max-w-sm`;
        notification.innerHTML = `${icon}${message}`;

        document.body.appendChild(notification);

        setTimeout(() => {
          notification.style.transform = "translateX(400px)";
          notification.style.opacity = "0";
          setTimeout(() => notification.remove(), 300);
        }, 4000);
      }

      // Add smooth scroll behavior for better UX
      document.documentElement.style.scrollBehavior = "smooth";
    </script>
  </body>
</html>
